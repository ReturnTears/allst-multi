# Nettyçš„å­¦ä¹ ä¹‹æ—…
```
https://www.bilibili.com/video/av46753577/?p=8

```
## å­¦ä¹ çš„å…³é”®ç‚¹:

### å¼ºåŠ¿æŠ€èƒ½çš„å­¦ä¹ 

### é‡è§†åŸºç¡€

### èŠ‚å¥æ„Ÿ

### æ€ç»´æ–¹å¼çš„æ”¹è¿›
    æ€ç»´æ–¹å¼çš„æ”¹å˜, æ€»ç»“é‡åˆ°çš„æƒ…å†µï¼Œè¦ä»¥ä¸åŒçš„è§’åº¦å»æ€è€ƒé—®é¢˜
### æ•ˆç‡å·¥å…·çš„ä½¿ç”¨
    VPN
### ä¸»åŠ¨è¾“å‡º
    åˆ†äº«

# Netty
    æ¦‚å¿µ:
    Netty is an asynchronous event-driven network application framework 
    for rapid development of maintainable high performance protocol servers & clients.
    Nettyæ˜¯ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶,ç”¨äºå¿«é€Ÿå¼€å‘å¯ç»´æŠ¤çš„é«˜æ€§èƒ½åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚
    
    Nettyæ˜¯ä¸€ä¸ªNIOå®¢æˆ·ç«¯æœåŠ¡å™¨æ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿè½»æ¾åœ°å¼€å‘åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ç­‰ç½‘ç»œåº”ç”¨ç¨‹åºã€‚å®ƒæå¤§åœ°ç®€åŒ–å¹¶ç®€åŒ–äº†TCPå’ŒUDPå¥—æ¥å­—æœåŠ¡å™¨ç­‰ç½‘ç»œç¼–ç¨‹ã€‚
    
    â€œå¿«é€Ÿç®€ä¾¿â€å¹¶ä¸æ„å‘³ç€æœ€ç»ˆçš„åº”ç”¨ç¨‹åºä¼šå—åˆ°å¯ç»´æŠ¤æ€§æˆ–æ€§èƒ½é—®é¢˜çš„å½±å“ã€‚Nettyç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œå…·æœ‰ä¸°å¯Œçš„åè®®ï¼Œ
    å¦‚FTPï¼ŒSMTPï¼ŒHTTPä»¥åŠå„ç§äºŒè¿›åˆ¶å’ŒåŸºäºæ–‡æœ¬çš„ä¼ ç»Ÿåè®®ã€‚å› æ­¤ï¼ŒNettyæˆåŠŸåœ°æ‰¾åˆ°äº†ä¸€ç§åœ¨ä¸å¦¥åçš„æƒ…å†µä¸‹å®ç°æ˜“äºå¼€å‘ï¼Œæ€§èƒ½ï¼Œç¨³å®šæ€§å’Œçµæ´»æ€§çš„æ–¹æ³•ã€‚
    
    **ç‰¹å¾**
    ä¸€ã€è®¾è®¡
        1ã€é€‚ç”¨äºå„ç§ä¼ è¾“ç±»å‹çš„ç»Ÿä¸€API - é˜»å¡å’Œéé˜»å¡å¥—æ¥å­—
        2ã€åŸºäºçµæ´»ä¸”å¯æ‰©å±•çš„äº‹ä»¶æ¨¡å‹ï¼Œå¯ä»¥æ¸…æ™°åœ°åˆ†ç¦»å…³æ³¨ç‚¹
        3ã€é«˜åº¦å¯å®šåˆ¶çš„çº¿ç¨‹æ¨¡å‹ - å•çº¿ç¨‹ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹æ± ï¼Œå¦‚SEDA
        4ã€çœŸæ­£çš„æ— è¿æ¥æ•°æ®æŠ¥å¥—æ¥å­—æ”¯æŒï¼ˆè‡ª3.1èµ·ï¼‰
    äºŒã€ä¾¿äºä½¿ç”¨
        1ã€è¯¦ç»†è®°å½•çš„Javadocï¼Œç”¨æˆ·æŒ‡å—å’Œç¤ºä¾‹
        2ã€æ²¡æœ‰å…¶ä»–ä¾èµ–é¡¹ï¼ŒJDK 5ï¼ˆNetty 3.xï¼‰æˆ–6ï¼ˆNetty 4.xï¼‰å°±è¶³å¤Ÿäº†
        æ³¨æ„ï¼šæŸäº›ç»„ä»¶ï¼ˆå¦‚HTTP / 2ï¼‰å¯èƒ½æœ‰æ›´å¤šè¦æ±‚ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… â€œè¦æ±‚â€é¡µé¢ã€‚
    ä¸‰ã€æ€§èƒ½
        1ã€æ›´é«˜çš„ååé‡ï¼Œæ›´ä½çš„å»¶è¿Ÿ
        2ã€å‡å°‘èµ„æºæ¶ˆè€—
        3ã€æœ€å°åŒ–ä¸å¿…è¦çš„å†…å­˜å¤åˆ¶
    å››ã€å®‰å…¨
        1ã€å®Œæ•´çš„SSL / TLSå’ŒStartTLSæ”¯æŒ
    äº”ã€ç¤¾åŒº
        1ã€æ—©å‘å¸ƒï¼Œç»å¸¸å‘å¸ƒ
        2ã€è‡ª2003å¹´ä»¥æ¥ï¼Œä½œè€…ä¸€ç›´åœ¨ç¼–å†™ç±»ä¼¼çš„æ¡†æ¶ï¼Œä»–ä»ç„¶å‘ç°ä½ çš„åé¦ˆå¾ˆçè´µï¼
    
    ---------------------------------------------
    å¼‚æ­¥åŒæ­¥çš„åŒºåˆ«:
    
    ---------------------------------------------
    äº‹ä»¶é©±åŠ¨:
 
## Nettyä»‹ç»

## Nettyæ¶æ„å®ç°

## Nettyæ¨¡å—åˆ†æ

## Netty Http Tunnel

## Nettyå¯¹Socketçš„å®ç°

## Nettyå‹ç¼©ä¸è§£å‹ç¼©
    -- 
    å¯¹æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­çš„å‹ç¼©
## Nettyå¯¹äºRPCçš„æ”¯æŒ 

## WebSocketå®ç°ä¸åŸç†åˆ†æ

## WebSocketè¿æ¥å»ºç«‹æ–¹å¼ä¸ç”Ÿå‘½å‘¨æœŸåˆ†è§£

## WebSocketæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å¼€å‘

## RPCæ¡†æ¶åˆ†æ

## Google Protobufä½¿ç”¨æ–¹å¼åˆ†æ
    
## Apache Thriftä½¿ç”¨æ–¹å¼ä¸æ–‡ä»¶ç¼–å†™æ–¹å¼åˆ†æ

## Nettyå¤§æ–‡ä»¶ä¼ é€æ”¯æŒ

## å¯æ‰©å±•çš„äº‹ä»¶æ¨¡å‹

## Nettyç»Ÿä¸€é€šä¿¡API

## é›¶æ‹·è´åœ¨Nettyä¸­çš„å®ç°ä¸æ”¯æŒ

## TCPç²˜åŒ…ä¸æ‹†åŒ…åˆ†æ

## NIOæ¨¡å‹åœ¨Nettyä¸­çš„å®ç°

## Nettyç¼–ç å¼€å‘æŠ€æœ¯

## Nettyé‡è¦ç±»ä¸æ¥å£æºä»£ç å‰–æ

## Channelåˆ†æ

## åºåˆ—åŒ–è®²è§£


 
 ## æ³¨æ„:
    springboot 2.1.5 + netty 4.1.10.Final ä¼šæŠ¥é”™java.lang.ClassNotFoundException: jdk.internal.misc.Unsafe
    springboot 2.1.5 + netty 4.1.32.Final
    
```
ä½¿ç”¨curlå‘é€è¯·æ±‚:
curl "http://localhost:8899"    (é»˜è®¤GETè¯·æ±‚)
curl -X POST "http://localhost:8899"
curl -X PUT "http://localhost:8899"
curl -X DETELE "http://localhost:8899"
channelçš„æ‰§è¡Œé¡ºåºæµç¨‹ : 
channel added           æ·»åŠ          
channel registered      æ³¨å†Œ
channel active          æ¿€æ´»
è¯·æ±‚æ–¹æ³•å: GET           æ‰§è¡ŒchannelRead0
channel inactive        æœªæ¿€æ´»
channel unregistered    æœªæ³¨å†Œ

æµè§ˆå™¨çš„æ‰§è¡Œæœºåˆ¶å’Œcurlæ˜¯ä¸ä¸€æ ·çš„

```
    
 ## éŸ©è€å¸ˆçš„Nettyè¯¾ç¨‹å­¦ä¹ 
 ğŸ Nettyæ ¸å¿ƒæ¨¡å—
 ğŸ Google Protobuf
 ğŸ Nettyç¼–è§£ç å™¨å’Œhandlerçš„è°ƒç”¨æœºåˆ¶ï¼ˆimportantï¼‰
 ğŸ TCPç²˜åŒ…ä¸æ‹†åŒ…åŠè§£å†³æ–¹æ¡ˆ
 ğŸ Nettyæ ¸å¿ƒæºç å‰–æ
   >> Nettyå¯åŠ¨è¿‡ç¨‹æºç å‰–æ
   >> Nettyæ¥å—è¯·æ±‚è¿‡ç¨‹æºç å‰–æ
   >> Nettyçš„FastThreadLocalæºç åˆ†æ
   >> Nettyåœ¨Dubboä¸­åº”ç”¨æºç åˆ†æ
   >> Nettyå¿ƒè·³ï¼ˆheartbeatï¼‰æœåŠ¡æºç å‰–æ
   >> Nettyæ ¸å¿ƒç»„ä»¶EventLoopæºç å‰–æ
 ğŸ 