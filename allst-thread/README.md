# çº¿ç¨‹
```text
1ã€ä¸ºä»€ä¹ˆéœ€è¦å¤šçº¿ç¨‹
CPUã€å†…å­˜ã€I/O è®¾å¤‡çš„é€Ÿåº¦æ˜¯æœ‰æå¤§å·®å¼‚çš„ï¼Œä¸ºäº†åˆç†åˆ©ç”¨ CPU çš„é«˜æ€§èƒ½ï¼Œå¹³è¡¡è¿™ä¸‰è€…çš„é€Ÿåº¦å·®å¼‚ï¼Œè®¡ç®—æœºä½“ç³»ç»“æ„ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘ç¨‹åºéƒ½åšå‡ºäº†è´¡çŒ®ï¼Œ
ä¸»è¦ä½“ç°ä¸º: 
    CPU å¢åŠ äº†ç¼“å­˜ï¼Œä»¥å‡è¡¡ä¸å†…å­˜çš„é€Ÿåº¦å·®å¼‚ï¼›// å¯¼è‡´ å¯è§æ€§é—®é¢˜  
    æ“ä½œç³»ç»Ÿå¢åŠ äº†è¿›ç¨‹ã€çº¿ç¨‹ï¼Œä»¥åˆ†æ—¶å¤ç”¨ CPUï¼Œè¿›è€Œå‡è¡¡ CPU ä¸ I/O è®¾å¤‡çš„é€Ÿåº¦å·®å¼‚ï¼›// å¯¼è‡´ åŸå­æ€§é—®é¢˜
    ç¼–è¯‘ç¨‹åºä¼˜åŒ–æŒ‡ä»¤æ‰§è¡Œæ¬¡åºï¼Œä½¿å¾—ç¼“å­˜èƒ½å¤Ÿå¾—åˆ°æ›´åŠ åˆç†åœ°åˆ©ç”¨ã€‚// å¯¼è‡´ æœ‰åºæ€§é—®é¢˜

2ã€
```

# çº¿ç¨‹æ± 
```text

â­çº¿ç¨‹æ± åŸºç¡€
â™¦æ¦‚å¿µä»‹ç»
1ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± ï¼Ÿ
ä»€ä¹ˆæ˜¯æ± ï¼Ÿç”Ÿæ´»ä¸­çš„æ± å°±æ˜¯ä¸€ç§ç”¨äºç››æ”¾çš„å®¹å™¨
çº¿ç¨‹æ± å…¶å®å°±æ˜¯ä¸€ç§å¤šçº¿ç¨‹å¤„ç†å½¢å¼ï¼Œå¹è¿‡ç¨‹ä¸­å¯ä»¥å°†äººç‰©æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œç„¶åå†åˆ›å»ºçº¿ç¨‹åè‡ªåŠ¨å¯åŠ¨è¿™äº›ä»»åŠ¡ã€‚
è¿™é‡Œçš„çº¿ç¨‹å°±æ˜¯æˆ‘ä»¬å‰é¢å­¦è¿‡çš„çº¿ç¨‹ï¼Œè¿™é‡Œçš„ä»»åŠ¡å°±æ˜¯æˆ‘ä»¬èµ·é‚£é¢å­¦è¿‡çš„å®ç°äº†Runnableæˆ–Callableæ¥å£çš„å®ä¾‹å¯¹è±¡ã€‚
2ã€ä¸ºä»€ä¹ˆä½¿ç”¨çº¿ç¨‹æ± ï¼Ÿ
ç”Ÿæ´»ä¸­çš„æ±½è½¦æ‹¥å µç°è±¡ï¼Œ å› æ­¤è½¦ç®¡æ‰€ä¼šå¯¹æ±½è½¦è¿›è¡Œé™å·ç®¡ç†
ä½¿ç”¨çº¿ç¨‹æ± æœ€å¤§çš„åŸå› å°±æ˜¯å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„éœ€æ±‚å’Œç¡¬ä»¶ç¯å¢ƒçµæ´»çš„æ§åˆ¶çº¿ç¨‹çš„æ•°é‡ï¼Œä¸”å¯ä»¥å¯¹æ‰€æœ‰çº¿ç¨‹è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†å’Œæ§åˆ¶ã€‚
ä»è€Œæé«˜ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ï¼Œé™ä½ç³»ç»Ÿçš„è¿è¡Œå‹åŠ›ï¼Œå½“ç„¶ï¼Œä½¿ç”¨çº¿ç¨‹æ± çš„åŸå› ä¸ä»…ä»…åªæœ‰è¿™äº›ï¼Œæˆ‘ä»¬å¯ä»¥ä»çº¿ç¨‹æ± è‡ªèº«çš„ä¼˜ç‚¹ä¸Šæ¥è¿›ä¸€æ­¥äº†è§£çº¿ç¨‹æ± çš„å¥½å¤„ã€‚
3ã€çº¿ç¨‹æ± æœ‰é‚£äº›ä¼˜åŠ¿ï¼Ÿ
1ï¼‰ã€çº¿ç¨‹å’Œä»»åŠ¡åˆ†ç¦»ï¼Œæå‡çº¿ç¨‹é‡ç”¨æ€§
2ï¼‰ã€æ§åˆ¶çº¿ç¨‹å¹¶å‘æ•°é‡ï¼Œé™ä½æœåŠ¡å™¨å‹åŠ›ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰çº¿ç¨‹
3ï¼‰ã€æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦ï¼Œå‡å¦‚åˆ›å»ºçº¿ç¨‹ç”¨çš„æ—¶é—´ä¸ºT1,æ‰§è¡Œä»»åŠ¡ç”¨çš„æ—¶é—´ä¸ºT2,é”€æ¯çº¿ç¨‹ç”¨çš„æ—¶é—´ä¸ºT3,é‚£ä¹ˆä½¿ç”¨æ± å°±å…å»äº†T1å’ŒT3çš„æ—¶é—´ã€‚
4ã€çº¿ç¨‹æ± åº”ç”¨åœºæ™¯
ğŸŒ‚ ç½‘è´­å•†å“ç§’æ€ã€äº‘ç›˜æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ã€12306ç½‘ä¸Šè´­ç¥¨ç³»ç»Ÿç­‰
ğŸŒ‚ åªè¦æœ‰å¹¶å‘çš„æ•Œæ³•ï¼Œä»»åŠ¡æ•°é‡å¤§æˆ–å°ï¼Œæ¯ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´é•¿æˆ–çŸ­çš„éƒ½å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ± ã€‚åªä¸è¿‡åœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„æ—¶å€™ï¼Œæ³¨æ„ä¸€ä¸‹è®¾ç½®åˆç†çš„çº¿ç¨‹å¤§å°å³å¯


â­çº¿ç¨‹æ± ä½¿ç”¨
â— Javaå†…ç½®çº¿ç¨‹æ± 
â€ Javaå†…ç½®çº¿ç¨‹æ± åŸç†å‰–æ
   åªæœ‰å…ˆäº†è§£äº†çº¿ç¨‹æ± çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬æ‰èƒ½è‡ªå·±å®šä¹‰çº¿ç¨‹æ± 
â— è‡ªå®šä¹‰çº¿ç¨‹æ± 
â€è‡ªå®šä¹‰çº¿ç¨‹æ± -å‚æ•°è®¾è®¡åˆ†æ
â˜€é€šè¿‡è§‚å¯ŸJavaçš„å†…ç½®çº¿ç¨‹æ± å‚æ•°è®²è§£å’Œçº¿ç¨‹æ± å·¥ä½œæµç¨‹æ€»ç»“ï¼Œ æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œè¦è®¾è®¡ä¸€ä¸ªå¥½çš„çº¿ç¨‹æ± å°±å¿…é¡»è¦åˆç†çš„è®¾ç½®çº¿ç¨‹æ± çš„4ä¸ªå‚æ•°ï¼š
  4ä¸ªå‚æ•°çš„è®¾è®¡
  ğŸŸæ ¸å¿ƒçº¿ç¨‹æ•°(corePoolSize):æ ¸å¿ƒçº¿ç¨‹æ•°çš„è®¾è®¡éœ€è¦ä¾æ®ä»»åŠ¡çš„å¤„ç†æ—¶é—´å’Œæ¯ç§’äº§ç”Ÿçš„ä»»åŠ¡æ•°é‡æ¥ç¡®å®š8020åŸåˆ™
  ğŸŸä»»åŠ¡é˜Ÿåˆ—é•¿åº¦(workQueue):ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦ä¸€èˆ¬è®¾è®¡ä¸ºï¼šæ ¸å¿ƒçº¿ç¨‹æ•°Ã·å•ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´*2å³å¯
  ğŸŸæœ€å¤§çº¿ç¨‹æ•°(maximumPoolSize):æœ€å¤§çº¿ç¨‹æ•°çš„è®¾è®¡é™¤äº†éœ€è¦å‚ç…§æ ¸å¿ƒçº¿ç¨‹æ•°çš„æ¡ä»¶å¤–ï¼Œè¿˜éœ€è¦å‚ç…§ç³»ç»Ÿæ¯ç§’äº§ç”Ÿçš„æœ€å¤§ä»»åŠ¡æ•°å†³å®šã€‚
    æœ€å¤§çº¿ç¨‹æ•° = ï¼ˆæœ€å¤§ä»»åŠ¡æ•° - ä»»åŠ¡é˜Ÿåˆ—é•¿åº¦ï¼‰Ã—å•ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´
    ==>> æœ€å¤§çº¿ç¨‹æ•° = ï¼ˆ1000 - 200ï¼‰Ã— 0.1 = 80
  ğŸŸæœ€å¤§ç©ºé—²æ—¶é—´(keepAliveTime):æ ¹æ®è‡ªå·±æƒ…å†µè‡ªè¡Œè®¾ç½®å³å¯
â€è‡ªå®šä¹‰çº¿ç¨‹æ± -å®ç°æ­¥éª¤
â˜€ç¼–å†™ä»»åŠ¡ç±»ï¼ˆMyTaskï¼‰,å®ç°Runnableæ¥å£
â˜€ç¼–å†™çº¿ç¨‹ç±»ï¼ˆMyWorkerï¼‰,ç”¨äºæ‰§è¡Œä»»åŠ¡ï¼Œéœ€è¦æŒæœ‰æ‰€æœ‰ä»»åŠ¡
â˜€ç¼–å†™çº¿ç¨‹æ± ç±»ï¼ˆMyThreadPoolï¼‰,åŒ…å«æäº¤ä»»åŠ¡ï¼Œæ‰§è¡Œä»»åŠ¡çš„èƒ½åŠ›
â˜€ç¼–å†™æµ‹è¯•ç±»ï¼ˆMyTestï¼‰,åˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡ï¼Œæäº¤å¤šä¸ªä»»åŠ¡æµ‹è¯•

â— å¼‚æ­¥è®¡ç®—ç»“æœ(Future)



â­çº¿ç¨‹æ± ç»¼åˆæ¡ˆä¾‹

ğŸ€ çº¿ç¨‹æ± æ€»ç»“:
  çº¿ç¨‹æ± çš„ä½¿ç”¨æ­¥éª¤å¯ä»¥å½’çº³æ€»ç»“ä¸ºäº”æ­¥:
  ğŸ åˆ©ç”¨Executorså·¥å‚ç±»çš„é™æ€æ–¹æ³•ï¼Œåˆ›å»ºçº¿ç¨‹æ± å¯¹è±¡
  ğŸ ç¼–å†™Runnableæˆ–Callableå®ç°ç±»çš„å®ä¾‹å¯¹è±¡
  ğŸ åˆ©ç”¨ExecutorServiceçš„submitæ–¹æ³•æˆ–ScheduledExecutorServiceçš„scheduleæ–¹æ³•æäº¤å¹¶æ‰§è¡Œçº¿ç¨‹ä»»åŠ¡
  ğŸ å¦‚æœç”±æ‰§è¡Œç»“æœï¼Œåˆ™è¿”å›å¼‚æ­¥æ‰§è¡Œç»“æœ
  ğŸ è°ƒç”¨shutdownæ–¹æ³•ï¼Œå…³é—­çº¿ç¨‹æ± 
  
  

```

# Javaçº¿ç¨‹ 
```text
JMH: Javaå¤šçº¿ç¨‹æµ‹è¯•å·¥å…·
Windowsä¸‹æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼š
1ã€æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
2ã€å‘½ä»¤è¡Œ tasklist æˆ–è€… tasklist | findstr java
3ã€æ€æ­»è¿›ç¨‹ï¼štaskkill /F /PID è¿›ç¨‹å· /Fè¡¨ç¤ºå¼ºåˆ¶æ€æ­» 

Linuxä¸‹æŸ¥çœ‹Javaè¿›ç¨‹ï¼š
1ã€jps æŸ¥çœ‹æ‰€æœ‰Javaè¿›ç¨‹
2ã€jstack PID æŸ¥çœ‹æŸä¸ªJavaè¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹çŠ¶æ€
3ã€jconsole æ¥æŸ¥çœ‹æŸä¸ªJavaè¿›ç¨‹ä¸­çº¿ç¨‹çš„è¿è¡Œæƒ…å†µ(å›¾åƒç•Œé¢)
jconsoleè¿œç¨‹ç›‘æ§é…ç½®ï¼š
java -Djava.rmi.server.hostname="ipåœ°å€" -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port="è¿æ¥ç«¯å£"
-Dcom.sun.management.jmxremote.ssl=æ˜¯å¦å®‰å…¨è¿æ¥(true/false) -Dcom.sun.management.jmxremote.authenticate=æ˜¯å¦è®¤è¯(true/false) Javaç±»
```
